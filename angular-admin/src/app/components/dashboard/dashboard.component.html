<!-- <div class="dashboard-container">
    <p-toast></p-toast>

    @if (loading) {
    <div class="loading-overlay">
        <i class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
    </div>
    }

    <div class="grid">
        @if (!loading) {
        <div class="col-12 md:col-6 lg:col-3">
            <p-card styleClass="stats-card">
                <div class="stats-card-content">
                    <div class="stats-icon users-icon">
                        <i class="pi pi-users"></i>
                    </div>
                    <div class="stats-info">
                        <h3>Total Users</h3>
                        <div class="stats-value">{{ systemStats.totalUsers || 0 }}</div>
                        <div class="stats-subtext">Active: {{ systemStats.activeUsers || 0 }}</div>
                    </div>
                </div>
            </p-card>
        </div>

        <div class="col-12 md:col-6 lg:col-3">
            <p-card styleClass="stats-card">
                <div class="stats-card-content">
                    <div class="stats-icon trips-icon">
                        <i class="pi pi-map"></i>
                    </div>
                    <div class="stats-info">
                        <h3>Total Trips</h3>
                        <div class="stats-value">{{ systemStats.totalTrips || 0 }}</div>
                    </div>
                </div>
            </p-card>
        </div>

        <div class="col-12 md:col-6 lg:col-3">
            <p-card styleClass="stats-card">
                <div class="stats-card-content">
                    <div class="stats-icon images-icon">
                        <i class="pi pi-images"></i>
                    </div>
                    <div class="stats-info">
                        <h3>Total Images</h3>
                        <div class="stats-value">{{ systemStats.totalImages || 0 }}</div>
                        <div class="stats-subtext">AI Generated: {{ systemStats.totalAiImages || 0 }}</div>
                    </div>
                </div>
            </p-card>
        </div>

        <div class="col-12 md:col-6 lg:col-3">
            <p-card styleClass="stats-card">
                <div class="stats-card-content">
                    <div class="stats-icon storage-icon">
                        <i class="pi pi-database"></i>
                    </div>
                    <div class="stats-info">
                        <h3>Storage Used</h3>
                        <div class="stats-value">{{ formatBytes(systemStats.totalStorageUsed || 0) }}</div>
                    </div>
                </div>
            </p-card>
        </div>
        }
    </div>

    <div class="grid mt-3">
        @if (!loading) {
        <div class="col-12 lg:col-6">
            <p-card styleClass="chart-card" header="User Activity">
                <div #userChart class="chart-container"></div>
            </p-card>
        </div>

        <div class="col-12 lg:col-6">
            <p-card styleClass="chart-card" header="Content Activity">
                <div #contentChart class="chart-container"></div>
            </p-card>
        </div>

        <div class="col-12 lg:col-6">
            <p-card styleClass="chart-card" header="Storage Usage">
                <div #storageChart class="chart-container"></div>
            </p-card>
        </div>

        <div class="col-12 lg:col-6">
            <p-card styleClass="chart-card" header="Top Users by Storage">
                <p-table [value]="topUsers" styleClass="p-datatable-sm" [tableStyle]="{'min-width': '50rem'}">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>User</th>
                            <th>Email</th>
                            <th>Storage Used</th>
                            <th>Usage</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-user>
                        <tr>
                            <td>{{ user.username }}</td>
                            <td>{{ user.email }}</td>
                            <td>{{ formatBytes(user.storageUsed) }}</td>
                            <td>
                                <p-progressBar [value]="user.percentUsed" [showValue]="true"
                                    [class]="user.percentUsed > 80 ? 'danger-progress' : ''"></p-progressBar>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                        <tr>
                            <td colspan="4" class="text-center">No user data available</td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="footer">
                        <tr>
                            <td colspan="4">
                                <button pButton label="View All Users" icon="pi pi-users"
                                    (click)="viewAllUsers()"></button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </p-card>
        </div>
        }
    </div>
</div> -->